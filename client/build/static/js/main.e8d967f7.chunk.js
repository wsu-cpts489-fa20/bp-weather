(this["webpackJsonpspeedgolf-react"]=this["webpackJsonpspeedgolf-react"]||[]).push([[0],{101:function(e,t){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(51),r=a.n(o),i=(a(57),a(58),a(59),a(60),a(1)),l=a.n(i),c=a(7),u=a(2),d=a(3),m=a(5),p=a(4),h=a(6),f={LOGIN:"LoginMode",FEED:"FeedMode",ROUNDS:"RoundsMode",ROUNDS_LOGROUND:"RoundsMode-LogRound",ROUNDS_EDITROUND:"RoundsMode-EditRound",COURSES:"CoursesMode"};Object.freeze(f);var g=f,b=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).getMenuBtnIcon=function(){return a.props.mode===g.ROUNDS_LOGROUND||a.props.mode===g.ROUNDS_EDITROUND?"fa fa-arrow-left":a.props.menuOpen?"fa fa-times":"fa fa-bars"},a.handleMenuBtnClick=function(){a.props.mode===g.ROUNDS_LOGROUND||a.props.mode===g.ROUNDS_EDITROUND?a.props.changeMode(g.ROUNDS):a.props.mode!=g.LOGIN&&a.props.toggleMenuOpen()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"navbar"},s.a.createElement("span",{className:"navbar-items"},s.a.createElement("button",{className:"sidemenu-btn",onClick:this.handleMenuBtnClick},s.a.createElement("span",{id:"menuBtnIcon",className:"sidemenu-btn-icon "+this.getMenuBtnIcon()})),s.a.createElement("img",{src:"https://openrepeater.com/wp-content/uploads/2019/12/icon-weather-sunrainheavy-512.png",alt:"Weather Tracker Logo",height:"38px",width:"38px"}),s.a.createElement("span",{className:"navbar-title"},"\xa0",this.props.title)))}}]),t}(s.a.Component),E=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).renderModeMenuItems=function(){switch(a.props.mode){case g.FEED:return s.a.createElement("div",null,a.props.localAccount&&"guest@mail.com"===a.props.userObj.id?s.a.createElement("div",null," "):s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-users"}),"\xa0Followed Users"),s.a.createElement("a",{className:"sidemenu-item "},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Search Feed"));case g.ROUNDS:return s.a.createElement("div",null,s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-plus"}),"\xa0Log New Round"),s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Search Rounds"));case g.COURSES:return s.a.createElement("div",null,s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-plus"}),"\xa0Add a Course"),s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Search Courses"));default:return null}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"sidemenu "+(this.props.menuOpen?"sidemenu-open":"sidemenu-closed"),onClick:this.props.toggleMenuOpen},s.a.createElement("div",{className:"sidemenu-title"},s.a.createElement("img",{src:this.props.profilePicURL,height:"60",width:"60"}),s.a.createElement("span",{id:"userID",className:"sidemenu-userID"},"\xa0",this.props.displayName)),this.renderModeMenuItems(),this.props.localAccount&&"guest@mail.com"!==this.props.userObj.id?s.a.createElement("a",{id:"accountBtn",className:"sidemenu-item",onClick:this.props.editAccount},s.a.createElement("span",{className:"fa fa-user"}),"\xa0Account"):null,s.a.createElement("a",{id:"aboutBtn",className:"sidemenu-item",onClick:this.props.showAbout},s.a.createElement("span",{className:"fa fa-info-circle"}),"\xa0About"),s.a.createElement("a",{id:"logOutBtn",className:"sidemenu-item",onClick:this.props.logOut},s.a.createElement("span",{className:"fa fa-sign-out-alt"}),"\xa0Log Out"))}}]),t}(s.a.Component),S=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modebar"+(this.props.mode===g.LOGIN?" invisible":this.props.menuOpen?" ignore-click visible":" visible")},s.a.createElement("a",{className:this.props.mode===g.FEED?" item-selected":null,onClick:function(){return e.props.changeMode(g.FEED)}},s.a.createElement("span",{className:"modebaricon fa fa-search",id:"searchTab"}),s.a.createElement("span",{className:"modebar-text"},"Search Location")),s.a.createElement("a",{className:this.props.mode===g.COURSES?" item-selected":null,onClick:function(){return e.props.changeMode(g.COURSES)}},s.a.createElement("span",{className:"modebar-icon  fa fa-star",id:"favoritesTab"}),s.a.createElement("span",{className:"modebar-text"},"Favorites")),s.a.createElement("a",{className:this.props.mode===g.ROUNDS||this.props.mode===g.ROUNDS_EDITROUND||this.props.mode===g.ROUNDS_LOGROUND?" item-selected":null,onClick:function(){return e.props.changeMode(g.ROUNDS)}},s.a.createElement("span",{className:"modebar-icon fa fa-book",id:"historyTab"}),s.a.createElement("span",{className:"modebar-text"},"Weather History")))}}]),t}(s.a.Component),v=a(8),w=a(10),O=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).handleChange=function(){var t=e.emailRef.current.value===e.props.email;t!=e.state.emailMatches&&e.setState({emailMatches:t})},e.emailRef=s.a.createRef(),e.state={emailMatches:!1},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.emailRef.current.focus()}},{key:"render",value:function(){return s.a.createElement("div",{id:"aboutModal",className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("center",null,s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Confirm Account Deletion"))),s.a.createElement("button",{id:"modalClose",className:"modal-close",onClick:this.props.close},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("p",null,"Do you really want to delete your account? ",s.a.createElement("br",null),s.a.createElement("i",null,"This action cannot be undone.")),s.a.createElement("label",null,"Confirm Email (",this.props.email,"):",s.a.createElement("br",null),s.a.createElement("input",{className:"form-center",type:"text",ref:this.emailRef,onChange:this.handleChange})),s.a.createElement("br",null)),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{className:"btn btn-danger",onClick:this.props.deleteAccount,disabled:!this.state.emailMatches},"Yes, Delete My Account"),s.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.close},"No, Cancel"))))}}]),t}(s.a.Component),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).checkDataValidity=function(){a.state.password!=a.state.passwordRepeat?a.repeatPassRef.current.setCustomValidity("This password must match password entered in previous field."):a.repeatPassRef.current.setCustomValidity("")},a.handleChange=function(e){var t,n=null==a.origAccountInfo||a.formIsUpdated(e.target.name,e.target.value);if("profilePic"===e.target.name)if(0==e.target.value.length)a.setState({profilePicURL:"https://icon-library.net//images/default-profile-icon/default-profile-icon-24.jpg",formUpdated:n},a.checkDataValidity);else{var s=Object(w.a)(a),o=new FileReader;o.readAsDataURL(a.profilePicRef.current.files[0]),o.addEventListener("load",(function(){s.setState({profilePicURL:this.result,formUpdated:n},this.checkDataValidity)}))}else a.setState((t={},Object(v.a)(t,e.target.name,e.target.value),Object(v.a)(t,"formUpdated",n),t),a.checkDataValidity)},a.formIsUpdated=function(e,t){return a.origAccountInfo[e]!=t||("displayName"!=e&&a.state.displayName!=a.origAccountInfo.displayName||("profilePicURL"!=e&&a.state.profilePicURL!=a.origAccountInfo.profilePicURL||("password"!=e&&a.state.password!==a.origAccountInfo.password||("passwordRepeat"!=e&&a.state.passwordRepeat!==a.origAccountInfo.passwordRepeat||("securityQuestion"!=e&&a.state.securityQuestion!==a.origAccountInfo.securityQuestion||"securityAnswer"!=e&&a.state.securityAnswer!==a.origAccountInfo.securityAnswer)))))},a.setDefaultDisplayName=function(e){e.target.value.length>0&&""===a.state.displayName&&a.setState({displayName:e.target.value})},a.handleSubmit=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,s,o,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={displayName:a.state.displayName,password:a.state.password,profilePicURL:a.state.profilePicURL,securityQuestion:a.state.securityQuestion,securityAnswer:a.state.securityAnswer},s="/users/"+a.state.accountName,!a.props.create){e.next=17;break}return e.next=6,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)});case 6:if(200!=(o=e.sent).status){e.next=11;break}a.props.done("New account created! Enter credentials to log in.",!1),e.next=15;break;case 11:return e.next=13,o.text();case 13:r=e.sent,a.props.done(r,!1);case 15:e.next=28;break;case 17:return e.next=19,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)});case 19:if(200!=(o=e.sent).status){e.next=24;break}a.props.done("User Account Updated!",!1),e.next=28;break;case 24:return e.next=26,o.text();case 26:i=e.sent,a.props.done(i,!1);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteAccount=Object(c.a)(l.a.mark((function e(){var t,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/users/"+a.state.accountName,e.next=3,fetch(t,{method:"DELETE"});case 3:if(200!=(n=e.sent).status){e.next=8;break}a.props.done("Account '"+a.state.accountName+"' has been deleted.",!0),e.next=12;break;case 8:return e.next=10,n.text();case 10:s=e.sent,a.props.done(s,!1);case 12:a.setState({confirmDelete:!1});case 13:case"end":return e.stop()}}),e)}))),a.confirmDeleteAccount=function(e){e.preventDefault(),a.setState({confirmDelete:!0})},a.origAccountInfo=null,a.newUserRef=s.a.createRef(),a.repeatPassRef=s.a.createRef(),a.profilePicRef=s.a.createRef(),a.state={accountName:"",displayName:"",profilePicURL:"https://icon-library.net//images/default-profile-icon/default-profile-icon-24.jpg",password:"",passwordRepeat:"",securityQuestion:"",securityAnswer:"",formUpdated:!1,confirmDelete:!1},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.create){e.next=12;break}return t="/users/"+this.props.userId,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,s=JSON.parse(n),this.origAccountInfo=s,this.origAccountInfo.passwordRepeat=s.password,this.setState({accountName:this.props.userId,displayName:s.displayName,profilePicURL:s.profilePicURL,password:s.password,passwordRepeat:s.password,securityQuestion:s.securityQuestion,securityAnswer:s.securityAnswer});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"}),s.a.createElement("div",{className:"modal-content form-center"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,s.a.createElement("b",null,this.props.create?"Create New Account":"Edit Account")),s.a.createElement("button",{className:"modal-close",onClick:this.props.cancel},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Email:",s.a.createElement("input",{autocomplete:"off",disabled:!this.props.create,className:"form-control form-text form-center",name:"accountName",type:"email",size:"35",placeholder:"Enter Email Address",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",required:!0,ref:this.newUserRef,value:this.state.accountName,onChange:this.handleChange,onBlur:this.setDefaultDisplayName})),s.a.createElement("br",null),s.a.createElement("label",null,"Password:",s.a.createElement("input",{autocomplete:"off",className:"form-control form-text form-center",name:"password",type:"password",size:"35",placeholder:"Enter Password",pattern:"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$",required:!0,value:this.state.password,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Repeat Password:",s.a.createElement("input",{className:"form-control form-text form-center",name:"passwordRepeat",type:"password",size:"35",placeholder:"Repeat Password",required:!0,ref:this.repeatPassRef,value:this.state.passwordRepeat,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Display Name:",s.a.createElement("input",{className:"form-control form-text form-center",name:"displayName",type:"text",size:"30",placeholder:"Display Name",required:!0,value:this.state.displayName,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Profile Picture:",s.a.createElement("br",null),s.a.createElement("input",{className:"form-control form-text form-center",name:"profilePic",type:"file",accept:"image/x-png,image/gif,image/jpeg",ref:this.profilePicRef,value:this.state.profilePic,onChange:this.handleChange}),s.a.createElement("img",{src:""!=this.state.profilePicURL?this.state.profilePicURL:this.state.profilePicDataURL,height:"60",width:"60"})),s.a.createElement("br",null),s.a.createElement("label",null,"Security Question:",s.a.createElement("textarea",{className:"form-control form-text form-center",name:"securityQuestion",size:"35",placeholder:"Security Question",rows:"2",cols:"35",maxLength:"100",required:!0,value:this.state.securityQuestion,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Answer to Security Question:",s.a.createElement("textarea",{className:"form-control form-text form-center",name:"securityAnswer",type:"text",placeholder:"Answer",rows:"2",cols:"35",maxLength:"100",required:!0,value:this.state.securityAnswer,onChange:this.handleChange})),s.a.createElement("br",null),this.props.create?null:s.a.createElement("button",{className:"btn btn-small btn-danger",onClick:this.confirmDeleteAccount},"Delete Account..."),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{role:"submit",disabled:!this.state.formUpdated,className:"btn btn-primary btn-color-theme modal-submit-btn"},s.a.createElement("span",{className:this.props.create?"fa fa-user-plus":"fa fa-user"}),"\xa0",this.props.create?"Create Account":"Update Account")))),this.state.confirmDelete?s.a.createElement(O,{email:this.state.accountName,deleteAccount:this.deleteAccount,close:function(){return e.setState({confirmDelete:!1})}}):null)}}]),t}(s.a.Component),N=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),e.resetPasswordRef.current.value===e.resetPasswordRepeatRef.current.value?e.props.resetPassword(e.resetPasswordRef.current.value):(e.resetPasswordRepeatRef.current.focus(),e.setState({errorMsg:"The passwords you entered do not match. Please try again."}))},e.checkForSubmit=function(t){"Enter"===t.code&&(t.preventDefault(),e.handleSubmit())},e.resetPasswordRef=s.a.createRef(),e.resetPasswordRepeatRef=s.a.createRef(),e.state={errorMsg:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Reset Password")),s.a.createElement("button",{className:"modal-close",onClick:this.props.cancelResetPassword},"\xd7")),s.a.createElement("div",{className:"modal-body"},""!=this.state.errorMsg?s.a.createElement("p",{className:"emphasis"},this.state.errorMsg):null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"New Password:",s.a.createElement("input",{type:"password",placeholder:"Enter new password",pattern:"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$",className:"form-control form-text",ref:this.resetPasswordRef})),s.a.createElement("label",null,"Repeat New Password:",s.a.createElement("input",{type:"password",placeholder:"Repeat new password",className:"form-control form-text",onKeyUp:this.checkForSubmit,ref:this.resetPasswordRepeatRef})),s.a.createElement("button",{role:"submit",className:"btn btn-primary btn-color-theme form-submit-btn"},s.a.createElement("span",{className:"fa fa-key"}),"\xa0Reset Password"))))))}}]),t}(s.a.Component),C=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).handleLookUpAccount=function(){var t=Object(c.a)(l.a.mark((function t(a){var n,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("/users/"+e.emailRef.current.value);case 3:if(200!=(n=t.sent).status){t.next=12;break}return t.next=7,n.json();case 7:s=t.sent,"local"===(o=JSON.parse(s)).authStrategy?e.props.getSecurityAnswer(o.id,o.securityQuestion,o.securityAnswer):e.setState({ErrMsg:"That account is authenticated through "+o.authStrategy+". Please log in to "+o.authStrategy+" to reset the password."}),t.next=13;break;case 12:e.setState({errorMsg:"Sorry, there is no account associated with '"+e.emailRef.current.value+"'."});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.emailRef=s.a.createRef(),e.state={errorMsg:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=this;return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Look Up Account")),s.a.createElement("button",{className:"modal-close",onClick:function(){t.props.cancelResetPassword()}},"\xd7")),s.a.createElement("div",{className:"modal-body"},""!=this.state.errMsg?s.a.createElement("p",{className:"emphasis"},this.state.errorMsg):null,s.a.createElement("form",{onSubmit:this.handleLookUpAccount},s.a.createElement("label",null,"Account Email Address:",s.a.createElement("input",(e={ref:this.emailRef,className:"form-control form-text",type:"email",size:"35",placeholder:"Enter Email Address",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}"},Object(v.a)(e,"ref",this.emailRef),Object(v.a)(e,"required",!0),e))),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-color-theme form-submit-btn"},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Look Up Account"))))))}}]),t}(s.a.Component),D=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),e.securityAnswerRef.current.value===e.props.answer?e.props.getNewPassword():(e.securityAnswerRef.current.focus(),e.setState({errorMsg:"Sorry, that is not the correct answer to the security question. Try again."}))},e.securityAnswerRef=s.a.createRef(),e.state={errorMsg:""},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.securityAnswerRef.current.focus()}},{key:"render",value:function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Answer Security Question")),s.a.createElement("button",{className:"modal-close",onClick:this.props.cancelResetPassword},"\xd7")),s.a.createElement("div",{className:"modal-body"},""!=this.state.errorMsg?s.a.createElement("p",{className:"emphasis"},this.state.errorMsg):null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Security Question:",s.a.createElement("textarea",{readOnly:!0,value:this.props.question,className:"form-control form-text",rows:"3",cols:"35"})),s.a.createElement("label",null,"Security Answer:",s.a.createElement("textarea",{className:"form-control form-text",placeholder:"Enter Security Question Answer",ref:this.securityAnswerRef,rows:"3",cols:"35"})),s.a.createElement("button",{role:"submit",className:"btn btn-primary btn-color-theme form-submit-btn"},s.a.createElement("span",{className:"fa fa-check"}),"\xa0Verify Answer"))))))}}]),t}(s.a.Component),j=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).handleLoginSubmit=function(){var t=Object(c.a)(l.a.mark((function t(a){var n,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loginBtnIcon:"fa fa-spin fa-spinner",loginBtnLabel:"Logging In..."}),n="auth/login?username="+e.emailInputRef.current.value+"&password="+e.passwordInputRef.current.value,console.log("user: "+e.emailInputRef.current.value),console.log("pass: "+e.passwordInputRef.current.value),t.next=7,fetch(n,{method:"POST"});case 7:if(200!=(s=t.sent).status){t.next=13;break}window.open("/","_self"),localStorage.setItem("userId",e.emailInputRef.current.value),t.next=17;break;case 13:return t.next=15,s.text();case 15:o=t.sent,e.setState({loginBtnIcon:"fa fa-sign-in",loginBtnLabel:"Log In",statusMsg:o});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.accountCreateDone=function(t){e.setState({statusMsg:t,showCreateAccountDialog:!1})},e.cancelCreateAccount=function(){e.setState({showCreateAccountDialog:!1})},e.cancelResetPassword=function(){e.resetUserId="",e.resetQ="",e.resetA="",e.setState({showLookUpAccountDialog:!1,showSecurityQuestionDialog:!1,showResetPaswordDialog:!1})},e.handleOAuthLogin=function(e){window.open("/auth/".concat(e),"_self")},e.handleOAuthLoginClick=function(t){var a;e.setState((a={},Object(v.a)(a,t+"Icon","fa fa-spin fa-spinner"),Object(v.a)(a,t+"Label","Connecting..."),a)),setTimeout((function(){return e.handleOAuthLogin(t)}),1e3)},e.handleGuestLoginClick=function(){var t=Object(c.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loginBtnIcon:"fa fa-spin fa-spinner",loginBtnLabel:"Logging In..."}),"auth/login?username=guest@mail.com&password=Guest123123",t.next=5,fetch("auth/login?username=guest@mail.com&password=Guest123123",{method:"POST"});case 5:if(200!=(n=t.sent).status){t.next=11;break}window.open("/","_self"),localStorage.setItem("userId","guest@mail.com"),t.next=15;break;case 11:return t.next=13,n.text();case 13:s=t.sent,e.setState({loginBtnIcon:"fa fa-sign-in",loginBtnLabel:"Log In",statusMsg:s});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getSecurityAnswer=function(t,a,n){e.resetUserId=t,e.resetQ=a,e.resetA=n,e.setState({showLookUpAccountDialog:!1,showSecurityQuestionDialog:!0})},e.getNewPassword=function(){e.setState({showSecurityQuestionDialog:!1,showResetPaswordDialog:!0})},e.resetPassword=function(){var t=Object(c.a)(l.a.mark((function t(a){var n,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/users/"+e.resetUserId,t.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify({password:a})});case 3:if(200!=(s=t.sent).status){t.next=8;break}e.setState({showResetPaswordDialog:!1,statusMsg:"Password successfully reset!"}),t.next=12;break;case 8:return t.next=10,s.text();case 10:o=t.sent,e.setState({showResetPasswordDialog:!1,statusMsg:o});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.accountCreateDone=function(t,a){e.setState({statusMsg:t,showCreateAccountDialog:!1})},e.closeStatusMsg=function(){e.setState({statusMsg:""})},e.cancelCreateAccount=function(){e.setState({showCreateAccountDialog:!1})},e.emailInputRef=s.a.createRef(),e.resetUserId="",e.resetQ="",e.resetA="",e.passwordInputRef=s.a.createRef(),e.state={statusMsg:"",loginBtnIcon:"fa fa-sign-in",loginBtnLabel:"Log In",showLookUpAccountDialog:!1,showSecurityQuestionDialog:!1,showResetPaswordDialog:!1,githubIcon:"fa fa-github",githubLabel:"Sign in with GitHub",guestLabel:"Sign in as guest",guestIcon:"fa fa-user-alt",googleIcon:"fa fa-google",googleLabel:"Sign in with Google",loginMsg:"",newAccountCreated:!1},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.emailInputRef.current.focus()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("center",null,""!=this.state.statusMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.statusMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeStatusMsg},s.a.createElement("span",{className:"fa fa-times"}))):null,this.state.showLookUpAccountDialog?s.a.createElement(C,{cancelResetPassword:this.cancelResetPassword,getSecurityAnswer:this.getSecurityAnswer}):null,this.state.showSecurityQuestionDialog?s.a.createElement(D,{cancelResetPassword:this.cancelResetPassword,question:this.resetQ,answer:this.resetA,getNewPassword:this.getNewPassword}):null,this.state.showResetPaswordDialog?s.a.createElement(N,{cancelResetPassword:this.cancelResetPassword,resetPassword:this.resetPassword}):null,s.a.createElement("form",{id:"loginInterface",onSubmit:this.handleLoginSubmit},s.a.createElement("label",{htmlFor:"emailInput",style:{padding:0,fontSize:24}},"Email:",s.a.createElement("input",{ref:this.emailInputRef,className:"form-control login-text",type:"email",placeholder:"Enter Email Address",id:"emailInput",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",required:!0})),s.a.createElement("p",null),s.a.createElement("label",{htmlFor:"passwordInput",style:{padding:0,fontSize:24}},"Password:",s.a.createElement("input",{ref:this.passwordInputRef,className:"form-control login-text",type:"password",placeholder:"Enter Password",id:"passwordInput",pattern:"[A-Za-z0-9!@#$%^&*()_+\\-]+",required:!0})),s.a.createElement("p",{className:"bg-danger",id:"feedback",style:{fontSize:16}}),s.a.createElement("button",{type:"submit",className:"btn-color-theme btn btn-primary btn-block login-btn"},s.a.createElement("span",{id:"login-btn-icon",className:this.state.loginBtnIcon}),"\xa0",this.state.loginBtnLabel),s.a.createElement("p",null,s.a.createElement("button",{type:"button",className:"btn btn-link login-link",onClick:function(){e.setState({showCreateAccountDialog:!0})}},"Create an account")," |",s.a.createElement("button",{type:"button",className:"btn btn-link login-link",onClick:function(){e.setState({showLookUpAccountDialog:!0})}},"Reset your password")),s.a.createElement("button",{type:"button",className:"btn btn-github",onClick:function(){return e.handleOAuthLoginClick("github")}},s.a.createElement("span",{className:this.state.githubIcon}),"\xa0",this.state.githubLabel),s.a.createElement("button",{id:"google-login-btn",type:"button",className:"btn btn-github",onClick:this.handleGuestLoginClick("google")},s.a.createElement("span",{className:this.state.googleIcon}),"\xa0",this.state.googleLabel),s.a.createElement("button",{id:"guest-login-btn",type:"button",className:"btn btn-github",onClick:this.handleGuestLoginClick},s.a.createElement("span",{className:this.state.guestIcon}),"\xa0",this.state.guestLabel),s.a.createElement("p",null,s.a.createElement("i",null,"Version CptS 489"))),this.state.showCreateAccountDialog?s.a.createElement(y,{create:!0,done:this.accountCreateDone,cancel:this.cancelCreateAccount}):null,this.state.showResetPasswordDialog?s.a.createElement(N,null):null))}}]),t}(s.a.Component),R=a(13);a(62),a(132);a(133).config();var I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){a.getCurrentObservations()},a.getCurrentObservations=Object(c.a)(l.a.mark((function e(){var t,n,s,o,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("lat now fetching: "+a.state.latitude+" long now fetching: "+a.state.longitude),e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?lat="+a.state.latitude+"&lon="+a.state.longitude+"&appid=ec73e0c69ee570aa0120006017f7af90");case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,o=a.getIcon(s.weather[0].id,!0),r="http://openweathermap.org/img/wn/"+o+"@4x.png",console.log("icon code: "+o),console.log("icon url: "+r),a.setState((t={place:s.name,retrieved:(new Date).toLocaleDateString()+" at "+(new Date).toLocaleTimeString(),conditions:s.weather[0].main,visibility:s.weather.visibility,visibilityUnit:"Meters",temp:Math.round(s.main.temp-273.15),tempUnit:"C",humidity:s.main.humidity},Object(v.a)(t,"visibility",s.visibility),Object(v.a)(t,"wind",s.wind.speed),Object(v.a)(t,"windUnit","Meters/sec"),Object(v.a)(t,"windDirection",s.wind.deg),Object(v.a)(t,"windDirectionUnit","Degrees"),Object(v.a)(t,"units","Metric"),Object(v.a)(t,"weatherIcon",r),t));case 12:case"end":return e.stop()}}),e)}))),a.favoriteStation=function(e){var t=new Date(Date.now()-6e4*(new Date).getTimezoneOffset()),n={};console.log(t.toUTCString()),n.id=t.toUTCString(),n.latitude=a.state.latitude.toString(),n.longitude=a.state.longitude.toString(),setTimeout(a.props.addWeatherStation,100,n)},a.setHistory=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.count=a.count+1,console.log("Counting..."+a.count),a.setState({countHistory:1}),(t=[]).push({Date:a.state.retrieved,Location:a.state.place,Condition:a.state.conditions,Visibility:a.state.visibility+" "+a.state.visibilityUnit,Temperature:a.state.temp+" "+a.state.tempUnit,Humidity:a.state.humidity,WindSpeed:a.state.wind+" "+a.state.windUnit,WindDirection:a.state.windDirection+" "+a.state.windDirectionUnit,countHistory:a.count}),e.next=7,a.setState({Histories:t});case 7:return console.log("Weather Station"),console.log(a.state.Histories),a.props.history(a.state.Histories),e.next=12,a.setState({Date:a.state.retrieved,Location:a.state.place,Condition:a.state.conditions,Visibility:a.state.visibility+" "+a.state.visibilityUnit,Temperature:a.state.temp+" "+a.state.tempUnit,Humidity:a.state.humidity,WindSpeed:a.state.wind+" "+a.state.windUnit,WindDirection:a.state.windDirection+" "+a.state.windDirectionUnit,countHistory:a.count});case 12:a.prepareHistory();case 13:case"end":return e.stop()}}),e)}))),a.prepareHistory=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object.assign({},a.state);case 2:t=e.sent,console.log(t),delete t.weatherIcon,delete t.Histories,delete t.latitude,delete t.longitude,delete t.place,delete t.retrieved,delete t.conditions,delete t.visibility,delete t.visibilityUnit,delete t.temp,delete t.tempUnit,delete t.wind,delete t.windUnit,delete t.windDirection,delete t.windDirectionUnit,delete t.units,delete t.humidity,a.addHistory(t);case 22:case"end":return e.stop()}}),e)}))),a.addHistory=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n="/histories/"+a.props.userObj.id,e.next=4,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});case 4:return s=e.sent,e.next=7,s.text();case 7:o=e.sent,200!=s.status?a.setState({errorMsg:o}):a.setState({errorMsg:""});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.toggleUnits=function(){"Imperial"==a.state.units?a.setState({units:"Metric",tempUnit:"C",temp:Math.round(5*(a.state.temp-32)/9),visibility:Math.round(a.state.visibility/3.28084),visibilityUnit:"Meters",wind:parseFloat(a.state.wind/3.28084).toFixed(2),windUnit:"Meters/sec"}):a.setState({units:"Imperial",tempUnit:"F",temp:Math.round(9*a.state.temp/5+32),visibility:Math.round(3.28084*a.state.visibility),visibilityUnit:"Feet",wind:parseFloat(3.28084*a.state.wind).toFixed(2),windUnit:"Feet/sec"})},a.getIcon=function(e,t){var a="";return e>=200&&e<300?a="11d":e>=300&&e<400?a="09d":e>=500&&e<600?a=e>=500&&e<=504?"10d":511==e?"13d":"09d":e>=600&&e<700?a="13d":e>=700&&e<800?a="50d":e>=800&&e<900&&(800==e?a=1==t?"01d":"01n":800==e?a="01n":e>=801&&e<=804&&(801==e?a=1==t?"02d":"02n":802==e?a=1==t?"03d":"03nd":803==e?a="04d":804==e&&(a="04d"))),a},a.state={latitude:a.props.latitude,longitude:a.props.longitude,Histories:[]},a.count=0,a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{align:"center",className:"jumbotron"},this.props.mode!=g.FEED?s.a.createElement("span",{className:"shift-icon fa fa-arrow-up fa-2x",onClick:function(){return e.props.moveStation(e.props.stationId,"up")}}):null,s.a.createElement("div",{class:"weatherStation"},s.a.createElement("h2",null,"Weather Conditions at ",this.state.place," "),s.a.createElement("h6",null,s.a.createElement("i",null,"Last updated: ",this.state.retrieved),"\xa0 ",s.a.createElement("span",{className:"refresh-icon fa fa-retweet",onClick:function(){return e.getCurrentObservations()}})),s.a.createElement("img",{src:this.state.weatherIcon,alt:"weatherIcon"}),s.a.createElement("h5",null,"Conditions: ",this.state.conditions),s.a.createElement("h5",null,"Visibility: ",this.state.visibility+" "+this.state.visibilityUnit),s.a.createElement("h5",null,"Temp: ",this.state.temp,"\xb0\xa0",this.state.tempUnit),s.a.createElement("h5",null,"Humidity: ",this.state.humidity,"%"),s.a.createElement("h5",null,"Wind Speed: ",this.state.wind+" "+this.state.windUnit),s.a.createElement("h5",null,"Wind Direction: ",this.state.windDirection+" "+this.state.windDirectionUnit),s.a.createElement("div",{className:"custom-control custom-switch"},s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"switch-"+this.props.stationId,onClick:this.toggleUnits}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"switch-"+this.props.stationId},"\xa0",this.state.units))),this.props.mode!=g.FEED?s.a.createElement("span",{className:"shift-icon fa fa-arrow-down fa-2x",onClick:function(){return e.props.moveStation(e.props.stationId,"down")}}):null,s.a.createElement("div",null,s.a.createElement("span",{id:"history-icon-btn",className:"history-icon fa fa-history fa-2x",onClick:function(){e.setHistory()}}),this.props.mode!=g.COURSES?s.a.createElement("span",{id:"favorite-icon-btn",className:"favorite-icon fa fa-star fa-2x",onClick:function(){e.favoriteStation(e.props.stationId)}}):null,this.props.mode!=g.FEED?s.a.createElement("span",{id:"delete-icon-btn",className:"delete-icon fa fa-times fa-2x",onClick:function(){return e.props.removeStation(e.props.stationId)}}):null))}}]),t}(s.a.Component),k=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){a.state.initialFire&&!a.props.savedStation?a.loadStations():navigator.geolocation.getCurrentPosition(a.getLocSuccess,a.getLocError)},a.getLocSuccess=function(e){a.setState({stations:[{lat:47.6062,lon:-122.3321,stationId:a.state.stationCount+1}],stationCount:a.state.stationCount+1})},a.getLocError=function(e){a.setState({stations:[{lat:47.6062,lon:-122.3321,stationId:a.state.stationCount+1}],stationCount:a.state.stationCount+1})},a.addNewStation=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,s,o,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null==(n=document.getElementById("inputStation").value)){e.next=10;break}return e.next=5,fetch("https://api.openweathermap.org/data/2.5/weather?q="+n+"&appid=ec73e0c69ee570aa0120006017f7af90");case 5:return s=e.sent,e.next=8,s.json();case 8:null!=(o=e.sent)&&o.hasOwnProperty("coord")?((r=Object(R.a)(a.state.stations)).push({lat:o.coord.lat,lon:o.coord.lon,stationId:a.state.stationCount+1}),(i={}).lat=o.coord.lat,i.lon=o.coord.lon,i.stationId=a.state.stationCount+1,a.setState({stations:r,station:i,stationCount:a.state.stationCount+1})):alert("Sorry, that weather location could not be found.");case 10:document.searchForLocation.reset();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setHistory=function(e){a.setState({Histories:e}),console.log(a.state.Histories),a.props.history(e)},a.addWeatherStation=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/weathers/"+a.props.userObj.id,e.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});case 3:return s=e.sent,e.next=6,s.text();case 6:e.sent,200!=s.status?console.log("failure"):(a.props.refreshOnUpdate(g.FEED),console.log("success"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={stations:[],station:{},stationCount:0,initialFire:!0},a.removeStation=a.removeStation.bind(Object(w.a)(a)),a.moveStation=a.moveStation.bind(Object(w.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"writeStations",value:function(e,t,a){for(var n=localStorage.getItem("userId"),s=JSON.parse(localStorage.getItem(n)),o={},r=0;r<e.length;r++)o.id=r+1,o.latitude=t[r],o.longitude=a[r],s.weatherStations[r+1]=o,s.weatherStationCount=e.length,localStorage.setItem(n,JSON.stringify(s)),o={}}},{key:"removeStation",value:function(e){for(var t=Object(R.a)(this.state.stations),a=0;a<t.length;a++)t[a].stationId==e&&t.splice(a,1);this.setState({stations:t,stationCount:this.state.stationCount-1},(function(){}))}},{key:"moveStation",value:function(e,t){var a=Object(R.a)(this.state.stations);if("up"==t){if(e!=a[0].stationId){for(var n=0;n<a.length;n++)if(a[n].stationId==e){var s=n,o=[a[i=n-1],a[s]];a[s]=o[0],a[i]=o[1]}this.setState({stations:a},(function(){}))}}else if(e!=a[a.length-1].stationId){for(var r=0;r<a.length;r++)if(a[r].stationId==e){s=r;var i,l=[a[i=r+1],a[s]];a[s]=l[0],a[i]=l[1];break}this.setState({stations:a},(function(){}))}}},{key:"loadStations",value:function(){var e=localStorage.getItem("userId"),t=JSON.parse(localStorage.getItem(e));if(null!=t){for(var a=[],n=0;n<t.weatherStationCount;n++){var s=n+1;a.push({lat:Number.parseFloat(t.weatherStations[s].latitude),lon:Number.parseFloat(t.weatherStations[s].longitude),stationId:s})}console.log(a),this.setState({stations:a,stationCount:a.length,initialFire:!1},(function(){}))}}},{key:"render",value:function(){for(var e=[],t=[],a=[],n=[],o=0;o<this.state.stations.length;o++)t.push(this.state.stations[o].stationId),a.push(this.state.stations[o].lat),n.push(this.state.stations[o].lon),e.push(s.a.createElement(I,{key:this.state.stations[o].stationId,latitude:this.state.stations[o].lat,longitude:this.state.stations[o].lon,stationId:this.state.stations[o].stationId,moveStation:this.moveStation,history:this.setHistory,userObj:this.state.userObj,removeStation:this.removeStation}));if(this.state.stations.length>=1){var r=localStorage.getItem("userId");JSON.parse(localStorage.getItem(r));null}return 0==this.state.stationCount&&this.componentDidMount(),s.a.createElement("div",{id:"main"},s.a.createElement("form",{name:"searchForLocation",onSubmit:this.addNewStation},s.a.createElement("input",{type:"newLocation",id:"inputStation",placeholder:"Enter a City, State, and Country..."})),s.a.createElement("div",{id:"weatherStations"},JSON.stringify(this.state.station)!=JSON.stringify({})?s.a.createElement(I,{userObj:this.props.userObj,key:this.state.station.stationId,latitude:this.state.station.lat,longitude:this.state.station.lon,stationId:this.state.station.stationId,moveStation:this.moveStation,history:this.setHistory,removeStation:this.removeStation,addWeatherStation:this.addWeatherStation,mode:this.props.mode}):null))}}]),t}(s.a.Component),U=a(25),A=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"aboutModal",className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("center",null,s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Confirm Round Deletion"))),s.a.createElement("button",{id:"modalClose",className:"modal-close",onClick:this.props.close},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("p",null,"Do you really want to delete this round?")),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{className:"btn btn-danger",onClick:this.props.deleteHistory},"Yes, Delete"),s.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.close},"No, Cancel"))))}}]),t}(s.a.Component),x=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).editRound=function(t){e.props.setEditId(t),e.props.changeMode(g.ROUNDS_EDITROUND)},e.deleteRound=function(){e.props.deleteRound(),e.setState({showConfirmDelete:!1})},e.deleteHistory=function(){e.props.deleteHistory(),e.setState({showConfirmDelete:!1})},e.confirmDelete=function(t){e.props.setDeleteId(t),e.setState({showConfirmDelete:!0})},e.renderTable=function(){for(var t=[],a=function(a){t.push(s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.props.Histories[a].Date),s.a.createElement("td",null,e.props.Histories[a].Location),s.a.createElement("td",null,e.props.Histories[a].Condition),s.a.createElement("td",null,e.props.Histories[a].Visibility),s.a.createElement("td",null,e.props.Histories[a].Temperature),s.a.createElement("td",null,e.props.Histories[a].Humidity),s.a.createElement("td",null,e.props.Histories[a].WindSpeed),s.a.createElement("td",null,e.props.Histories[a].WindDirection),s.a.createElement("td",null,s.a.createElement("button",{onClick:e.props.menuOpen?null:function(){return e.confirmDelete(a)}},s.a.createElement("span",{className:"fa fa-trash"})))))},n=0;n<e.props.Histories.length;++n)a(n);return t},e.state={showConfirmDelete:!1},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"padded-page"},s.a.createElement("h1",null),s.a.createElement("table",{className:"table table-hover"},s.a.createElement("thead",{className:"thead-light"},s.a.createElement("tr",null,s.a.createElement("th",null,"Date"),s.a.createElement("th",null,"Location"),s.a.createElement("th",null,"Weather Condition"),s.a.createElement("th",null,"Visibility"),s.a.createElement("th",null,"Temperature"),s.a.createElement("th",null,"Humidity"),s.a.createElement("th",null,"Wind Speed"),s.a.createElement("th",null,"Wind Direction"),s.a.createElement("th",null,"Delete"))),s.a.createElement("tbody",null,0===Object.keys(this.props.Histories).length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5",style:{fontStyle:"italic"}},"No rounds logged")):this.renderTable())),this.state.showConfirmDelete?s.a.createElement(A,{close:function(){return e.setState({showConfirmDelete:!1})},deleteHistory:this.deleteHistory}):null)}}]),t}(s.a.Component),M=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=e.target.name;if("seconds"===t){var n=e.target.value.length<2?"0"+e.target.value:e.target.value,s=a.computeSGS(a.state.strokes,a.state.minutes,n);a.setState({seconds:n,SGS:s})}else if("strokes"===t){var o=e.target.value,r=a.computeSGS(o,a.state.minutes,a.state.seconds);a.setState({strokes:o,SGS:r})}else if("minutes"===t){var i=e.target.value,l=a.computeSGS(a.state.strokes,i,a.state.seconds);a.setState({minutes:i,SGS:l})}else a.setState(Object(v.a)({},t,e.target.value))},a.handleSubmit=function(e){a.setState({faIcon:"fa fa-spin fa-spinner",btnLabel:a.props.mode===g.ROUNDS_LOGROUND?"Saving...":"Updating..."});var t=a.state;delete t.faIcon,delete t.btnLabel,setTimeout(a.props.saveRound,1e3,t),e.preventDefault()},a.computeSGS=function(e,t,a){return Number(e)+Number(t)+":"+a};var n=new Date(Date.now()-6e4*(new Date).getTimezoneOffset());if(a.props.mode===g.ROUNDS_LOGROUND)a.state={date:n.toISOString().substr(0,10),course:"",type:"practice",holes:"18",strokes:80,minutes:50,seconds:"00",notes:"",faIcon:"fa fa-save",btnLabel:"Save Round Data"};else{var s=Object(U.a)({},a.props.startData);delete s.id,s.faIcon="fa fa-edit",s.btnLabel="Update Round Data",a.state=s}return a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"padded-page",onSubmit:this.handleSubmit},s.a.createElement("center",null,s.a.createElement("label",null,"Date:",s.a.createElement("input",{name:"date",className:"form-control form-center",type:"date",value:this.state.date,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("label",null,"Course:",s.a.createElement("input",{name:"course",className:"form-control form-center",type:"text",value:this.state.course,onChange:this.handleChange,placeholder:"Course played",size:"50",maxLength:"50"})),s.a.createElement("p",null),s.a.createElement("label",null,"Type:",s.a.createElement("select",{name:"type",value:this.state.type,className:"form-control form-center",onChange:this.handleChange},s.a.createElement("option",{value:"practice"},"Practice"),s.a.createElement("option",{value:"tournament"},"Tournament"))),s.a.createElement("p",null),s.a.createElement("label",null,"# Holes:",s.a.createElement("select",{name:"holes",value:this.state.holes,className:"form-control form-center",onChange:this.handleChange},s.a.createElement("option",{value:"9"},"9"),s.a.createElement("option",{value:"18"},"18"))),s.a.createElement("p",null),s.a.createElement("label",null,"# Strokes:",s.a.createElement("input",{name:"strokes",className:"form-control form-center",type:"number",min:"9",max:"200",value:this.state.strokes,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("label",null,"Time: ",s.a.createElement("br",null),s.a.createElement("input",{name:"minutes",type:"number",size:"3",min:"10",max:"400",value:this.state.minutes,onChange:this.handleChange}),":",s.a.createElement("input",{name:"seconds",type:"number",size:"2",min:"0",max:"60",value:this.state.seconds,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("label",null,"Speedgolf Score: ",s.a.createElement("br",null),s.a.createElement("input",{name:"SGS",className:"form-center",type:"text",size:"6",disabled:!0,value:this.computeSGS(this.state.strokes,this.state.minutes,this.state.seconds)})),s.a.createElement("p",null),s.a.createElement("label",null,"Notes:",s.a.createElement("textarea",{name:"notes",className:"form-control",rows:"6",cols:"75",placeholder:"Enter round notes",value:this.state.notes,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("p",null),s.a.createElement("button",{type:"submit",style:{width:"70%",fontSize:"36px"},className:"btn btn-primary btn-color-theme"},s.a.createElement("span",{className:this.state.faIcon}),"\xa0",this.state.btnLabel)))}}]),t}(s.a.Component),L=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"floatbtn",onClick:this.props.handleClick},s.a.createElement("span",{className:"floatbtn-icon fa fa-plus"}))}}]),t}(s.a.Component),P=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).addRound=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/rounds/"+a.props.userObj.id,e.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});case 3:return s=e.sent,e.next=6,s.text();case 6:o=e.sent,200!=s.status?(a.setState({errorMsg:o}),a.props.changeMode(g.ROUNDS)):(a.setState({errorMsg:""}),a.props.refreshOnUpdate(g.ROUNDS));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.editRound=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/rounds/"+a.props.userObj.id+"/"+a.props.userObj.rounds[a.editId]._id,e.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)});case 3:return s=e.sent,e.next=6,s.text();case 6:o=e.sent,200!=s.status?(a.setState({errorMsg:o}),a.props.changeMode(g.ROUNDS)):a.props.refreshOnUpdate(g.ROUNDS);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteRound=Object(c.a)(l.a.mark((function e(){var t,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/rounds/"+a.props.userObj.id+"/"+a.props.userObj.rounds[a.deleteId]._id,e.next=3,fetch(t,{method:"DELETE"});case 3:return n=e.sent,e.next=6,n.text();case 6:s=e.sent,200!=n.status?(a.setState({errorMsg:"An error occurred when attempting to delete round from database: "+s}),a.props.changeMode(g.ROUNDS)):a.props.refreshOnUpdate(g.ROUNDS);case 8:case"end":return e.stop()}}),e)}))),a.deleteHistory=Object(c.a)(l.a.mark((function e(){var t,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/histories/"+a.props.userObj.id+"/"+a.props.userObj.histories[a.deleteId]._id,console.log(a.props.userObj.histories[a.deleteId]._id),e.next=4,fetch(t,{method:"DELETE"});case 4:return n=e.sent,e.next=7,n.text();case 7:s=e.sent,200!=n.status&&a.setState({errorMsg:"An error occurred when attempting to delete round from database: "+s});case 9:case"end":return e.stop()}}),e)}))),a.setDeleteId=function(e){a.deleteId=e,a.props.setDeleteId(e),console.log("Delete ID ",a.deleteId),a.setState({errorMsg:""})},a.setEditId=function(e){a.editId=e,a.setState({errorMsg:""})},a.closeErrorMsg=function(){a.setState({errorMsg:""})},a.state={Histories:a.props.Histories},a.deleteId="",a.editId="",a.state={errorMsg:""},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;switch(this.props.mode){case g.ROUNDS:return s.a.createElement(s.a.Fragment,null,""!=this.state.errorMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.errorMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeErrorMsg},s.a.createElement("span",{className:"fa fa-times"}))):null,s.a.createElement(x,{rounds:this.props.userObj.rounds,setEditId:this.setEditId,setDeleteId:this.setDeleteId,deleteRound:this.deleteRound,deleteHistory:this.deleteHistory,Histories:this.props.Histories,changeMode:this.props.changeMode,menuOpen:this.props.menuOpen}),s.a.createElement(L,{handleClick:function(){return e.props.changeMode(g.ROUNDS_LOGROUND)},menuOpen:this.props.menuOpen,icon:"fa fa-plus"}));case g.ROUNDS_LOGROUND:return s.a.createElement(M,{mode:this.props.mode,startData:"",saveRound:this.addRound});case g.ROUNDS_EDITROUND:var t=Object(U.a)({},this.props.userObj.rounds[this.editId]);return t.date=t.date.substr(0,10),t.seconds<10&&(t.seconds="0"+t.seconds),delete t.SGS,s.a.createElement(M,{mode:this.props.mode,startData:t,saveRound:this.editRound})}}}]),t}(s.a.Component),H=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){a.state.initialFire&&!a.props.savedStation&&a.loadStations()},a.getLocSuccess=function(e){a.setState({stations:[{lat:47.6062,lon:-122.3321,stationId:a.state.stationCount+1}],stationCount:a.state.stationCount+1})},a.getLocError=function(e){a.setState({stations:[{lat:47.6062,lon:-122.3321,stationId:a.state.stationCount+1}],stationCount:a.state.stationCount+1})},a.addStation=Object(c.a)(l.a.mark((function e(){var t,n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=prompt("Enter a City, State, and Country:"))){e.next=9;break}return e.next=4,fetch("https://api.openweathermap.org/data/2.5/weather?q="+t+"&appid=ec73e0c69ee570aa0120006017f7af90");case 4:return n=e.sent,e.next=7,n.json();case 7:null!=(s=e.sent)&&s.hasOwnProperty("coord")?((o=Object(R.a)(a.state.stations)).push({lat:s.coord.lat,lon:s.coord.lon,stationId:a.state.stationCount+1}),a.setState({stations:o,stationCount:a.state.stationCount+1},(function(){a.writeStations(a.state.stationCount,s.coord.lat,s.coord.lon)}))):alert("Sorry, that weather location could not be found.");case 9:case"end":return e.stop()}}),e)}))),a.deleteWeatherStation=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("delete station"),console.log("stationId: "+t.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.removeStation=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,s,o,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("stationId: "+t),n=Object(R.a)(a.state.stations),s=0;s<n.length;s++)n[s].stationId==t&&n.splice(s,1);return a.setState({stations:n,stationCount:a.state.stationCount-1},(function(){})),o="/weathers/"+a.props.userObj.id+"/"+t.toString(),e.next=7,fetch(o,{method:"DELETE"});case 7:return r=e.sent,e.next=10,r.text();case 10:i=e.sent,200!=r.status?(a.setState({errorMsg:"An error occurred when attempting to delete round from database: "+i}),a.props.changeMode(g.COURSES)):a.props.refreshOnUpdate(g.COURSES);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setHistory=function(e){a.setState({Histories:e}),console.log(a.state.Histories),a.props.history(e)},a.state={stations:[],stationCount:0,initialFire:!0},a.removeStation=a.removeStation.bind(Object(w.a)(a)),a.moveStation=a.moveStation.bind(Object(w.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"moveStation",value:function(e,t){var a=Object(R.a)(this.state.stations);if("up"==t){if(e!=a[0].stationId){for(var n=0;n<a.length;n++)if(a[n].stationId==e){var s=n,o=[a[i=n-1],a[s]];a[s]=o[0],a[i]=o[1]}this.setState({stations:a},(function(){}))}}else if(e!=a[a.length-1].stationId){for(var r=0;r<a.length;r++)if(a[r].stationId==e){s=r;var i,l=[a[i=r+1],a[s]];a[s]=l[0],a[i]=l[1];break}this.setState({stations:a},(function(){}))}}},{key:"loadStations",value:function(){this.props.refreshOnUpdate(g.COURSES);var e=this.props.userObj;if(null!=e){for(var t=[],a=0;a<e.weathers.length;a++)t.push({lat:Number.parseFloat(e.weathers[a].latitude),lon:Number.parseFloat(e.weathers[a].longitude),stationId:e.weathers[a].id});console.log(t),this.setState({stations:t,stationCount:t.length,initialFire:!1},(function(){}))}}},{key:"render",value:function(){for(var e=[],t=[],a=[],n=[],o=0;o<this.state.stations.length;o++)t.push(this.state.stations[o].stationId),a.push(this.state.stations[o].lat),n.push(this.state.stations[o].lon),e.push(s.a.createElement(I,{key:this.state.stations[o].stationId,latitude:this.state.stations[o].lat,longitude:this.state.stations[o].lon,stationId:this.state.stations[o].stationId,moveStation:this.moveStation,history:this.setHistory,removeStation:this.removeStation,addWeatherStation:this.deleteWeatherStation,mode:this.props.mode}));if(0==this.state.initialFire){var r=localStorage.getItem("userId");JSON.parse(localStorage.getItem(r));null}return 0==this.state.stationCount&&this.componentDidMount(),s.a.createElement("div",{id:"main"},s.a.createElement("div",{id:"weatherStations"},e))}}]),t}(s.a.Component),T=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,"About SpeedScore"),s.a.createElement("button",{className:"modal-close",onClick:this.props.close},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("img",{src:"https://dl.dropboxusercontent.com/s/awuwr1vpuw1lkyl/SpeedScore4SplashLogo.png",height:"200",width:"200"}),s.a.createElement("h3",null,"The World's First and Only Suite of Apps for Speedgolf"),s.a.createElement("p",null,"Version CptS 489 Fa20 Complete (MERN)",s.a.createElement("br",null),"\xa9 2017-20 The Professor of Speedgolf. All rights reserved."),s.a.createElement("div",{style:{textAlign:"left"}},s.a.createElement("p",null,"SpeedScore apps support"),s.a.createElement("ul",null,s.a.createElement("li",null,"live touranment scoring (",s.a.createElement("i",null,"SpeedScore Live\xae"),")"),s.a.createElement("li",null,"tracking personal speedgolf rounds and sharing results (",s.a.createElement("i",null,"SpeedScore Track\xae"),")"),s.a.createElement("li",null,"finding speedgolf-friendly courses, booking tee times, and paying to play speedgolf by the minute (",s.a.createElement("i",null,"SpeedScore Play\xae"),")")),s.a.createElement("p",null,"SpeedScore was first developed by Dr. Chris Hundhausen, associate professor of computer science at Washington State University and the ",s.a.createElement("i",null,"Professor of Speedgolf"),", with support from Scott Dawley, CEO of Speedgolf USA, LLC."),s.a.createElement("p",null,"For more information on SpeedScore, visit ",s.a.createElement("a",{href:"http://speedscore.live",target:"_blank"},"SpeedScore's web site"),". For more information on speedgolf, visit ",s.a.createElement("a",{href:"http://playspeedgolf.com",target:"_blank"},"playspeedgolf.com")," and ",s.a.createElement("a",{href:"http://usaspeedgolf.com",target:"_blank"},"Speedgolf USA"),"."))),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{className:"btn btn-primary btn-color-theme",onClick:this.props.close},"OK")))))}}]),t}(s.a.Component),F={};F[g.LOGIN]="Welcome to Weather App",F[g.FEED]="Search",F[g.ROUNDS]="Weather History",F[g.ROUNDS_LOGROUND]="New Weather History",F[g.ROUNDS_EDITROUND]="Edit Weather History",F[g.COURSES]="Favorites";var G={};G[g.LOGIN]=j,G[g.FEED]=k,G[g.ROUNDS]=P,G[g.ROUNDS_LOGROUND]=P,G[g.ROUNDS_EDITROUND]=P,G[g.COURSES]=H;var W=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).refreshOnUpdate=function(){var t=Object(c.a)(l.a.mark((function t(a){var n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users/"+e.state.userObj.id);case 2:return n=t.sent,t.next=5,n.json();case 5:n=t.sent,s=JSON.parse(n),e.setState({userObj:s,mode:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.createLocalStorageForGuest=function(){var t=e.state.userObj.id;"guest@mail.com"==t&&(localStorage.setItem("userId",t),null==localStorage.getItem(t)?(localStorage.setItem(t,JSON.stringify({weatherStations:{},weatherStationCount:0})),e.setState({hasSavedStations:!1})):e.setState({hasSavedStations:!0},(function(){console.log("Has data!!")})))},e.handleChangeMode=function(t){e.setState({mode:t})},e.openMenu=function(){e.setState({menuOpen:!0})},e.closeMenu=function(){e.setState({menuOpen:!1})},e.toggleMenuOpen=function(){e.setState((function(e){return{menuOpen:!e.menuOpen}}))},e.setUserId=function(t){e.setState({userId:t,authenticated:!0})},e.showEditAccount=function(){e.setState({showEditAccountDialog:!0})},e.cancelEditAccount=function(){e.setState({showEditAccountDialog:!1})},e.editAccountDone=function(t,a){a?e.setState({showEditAccountDialog:!1,statusMsg:t,mode:g.LOGIN}):e.setState({showEditAccountDialog:!1,statusMsg:t})},e.closeStatusMsg=function(){e.setState({statusMsg:""})},e.setHistory=function(t){0===e.state.Histories.length?e.setState({Histories:t}):(t.countHistory=e.state.Histories.countHistory+1,e.setState((function(e){return{Histories:e.Histories.concat(t)}}))),console.log("Root"),console.log(e.state.Histories)},e.setDeleteId=function(t){delete e.state.Histories[t]},e.state={mode:g.LOGIN,menuOpen:!1,authenticated:!1,userObj:{displayName:"",profilePicURL:""},editAccount:!1,showEditAccountDialog:!1,statusMsg:"",showAboutDialog:!1,Histories:[]},e}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.authenticated||fetch("/auth/test").then((function(e){return e.json()})).then((function(t){t.isAuthenticated&&e.setState({userObj:t.user,authenticated:!0,mode:g.FEED},(function(){e.createLocalStorageForGuest()}))}))}},{key:"render",value:function(){var e=this,t=G[this.state.mode];return s.a.createElement("div",{className:"padded-page"},this.state.showAboutDialog?s.a.createElement(T,{close:function(){return e.setState({showAboutDialog:!1})}}):null,""!=this.state.statusMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.statusMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeStatusMsg},s.a.createElement("span",{className:"fa fa-times"}))):null,this.state.showEditAccountDialog?s.a.createElement(y,{create:!1,userId:this.state.userObj.id,done:this.editAccountDone,cancel:this.cancelEditAccount}):null,s.a.createElement(b,{title:F[this.state.mode],mode:this.state.mode,changeMode:this.handleChangeMode,menuOpen:this.state.menuOpen,toggleMenuOpen:this.toggleMenuOpen}),s.a.createElement(E,{menuOpen:this.state.menuOpen,mode:this.state.mode,toggleMenuOpen:this.toggleMenuOpen,displayName:this.state.userObj.displayName,profilePicURL:this.state.userObj.profilePicURL,localAccount:"local"===this.state.userObj.authStrategy,userObj:this.state.userObj,editAccount:this.showEditAccount,logOut:function(){e.handleChangeMode(g.LOGIN),localStorage.setItem("userId",null)},showAbout:function(){e.setState({showAboutDialog:!0})}}),s.a.createElement(S,{mode:this.state.mode,changeMode:this.handleChangeMode,menuOpen:this.state.menuOpen}),s.a.createElement(t,{menuOpen:this.state.menuOpen,mode:this.state.mode,Histories:this.state.Histories,changeMode:this.handleChangeMode,setDeleteId:this.setDeleteId,userObj:this.state.userObj,history:this.setHistory,refreshOnUpdate:this.refreshOnUpdate}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},52:function(e,t,a){e.exports=a(135)},60:function(e,t,a){},91:function(e,t){},92:function(e,t){},99:function(e,t){}},[[52,1,2]]]);
//# sourceMappingURL=main.e8d967f7.chunk.js.map